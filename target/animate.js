(function(window){"use strict";function animate(){return Timeline(arguments)}var ease={linear:function(x,t,b,c,d){return c*t/d+b}};function set(obj,prop,val){console.log(obj,prop,val)}var timelinePlayStack={},timelineCounter=0,interval=null,fps=24;function addTimelineToPlayStack(timeline){timelinePlayStack[timelineCounter]=timeline;timelineCounter+=1}function removeTimelineFromPlayStack(index){delete timelinePlayStack[index]}function playAll(){function onInterval(){for(var index in timelinePlayStack){var timeline=timelinePlayStack[index];timeline.time(timeNow())}}interval=setInterval(onInterval,1e3/fps)}function stopAll(){clearInterval(interval)}function getActorType(actor){}function timeNow(){return+new Date}function Timeline(args){var objectsToAnimate=args.length,i=0;return function(){var actors=[],frames=[],playhead=0,lastMS=timeNow(),framesPerSecond=4,index;for(;i<objectsToAnimate;i+=2){var actorObject=args[i],tracksAndFrames=args[i+1],tracksToAnimate,framesObject,frame,value,track;for(track in tracksAndFrames){framesObject=tracksAndFrames[track];var framesArray=[],valuesArray=[];for(frame in framesObject){framesArray.push(frame);valuesArray.push(framesObject[frame])}tracksAndFrames[track]=[framesArray,valuesArray]}}function update(){var relativeTime=playhead,fromValue,fromFrame,toValue,toFrame,frames,values,track,trackName,i,l;for(trackName in tracksAndFrames){track=tracksAndFrames[trackName];frames=track[0];values=track[1];fromFrame=frames[0];fromValue=values[0];toFrame=frames[1];toValue=values[1];for(i=1,l=frames.length;i<l;i+=1){if(relativeTime>=frames[i]){fromFrame=parseFloat(frames[i]);fromValue=values[i];toFrame=parseFloat(frames[i+1]);toValue=values[i+1]}}var value=ease.linear(0,relativeTime-fromFrame,fromValue,toValue-fromValue,toFrame-fromFrame);actorObject.setAttribute(trackName,value)}}return{play:function(){index=timelineCounter;lastMS=timeNow();addTimelineToPlayStack(this)},pause:function(){removeTimelineFromPlayStack(index);index=false},time:function(ms){if(index!==false){playhead+=(ms-lastMS)/1e3;update();lastMS=ms}},reset:function(){playhead=0},onUpdate:function(){},onEnd:function(){}}}()}window.animate=animate;playAll()})(this);